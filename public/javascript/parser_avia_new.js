$(document).ready(function(){function t(t,r){if(null===r&&(r=1),null===t||1>r)return!1;t+="";for(var a=[],s=0,e=t.length;e>s;)a.push(t.slice(s,s+=r));return a}function r(t){var r=t/60^0;if(r){var a=t%60;10>a&&(a="0"+a),t=r+" ч "+a+" м"}else t+=" м";return t}function a(t,r){"undefined"==typeof r[0]||"undefined"==typeof r[0].proposals&&"undefined"==typeof r[0].gates_info?($("#progressbar").css({display:"none"}),u=1):(s(r),z>1&&(e("min_price",r),n(),i(h,0,10)),o(t),z++)}function s(t){for(var r in t)if("undefined"!=typeof t[r]&&"undefined"!=t[r].filters_boundary&&"undefined"!=typeof t[r].proposals&&0!=t[r].proposals.length&&"undefined"!=typeof t[r]&&"undefined"!=typeof t&&"undefined"==typeof t[r].gates_info[666])for(var a in t[r].proposals){if("undefined"==typeof h[0]){h[P]={},h[P].sign=t[r].proposals[a].sign,h[P].proposals={},h[P].proposals=t[r].proposals[a],h[P].gates_info={},h[P].gates_info[0]=t[r].gates_info,h[P].price={},h[P].url={},h[P].view=0,h[P].search_id=t[r].search_id,h[P].min_price={},h[P].airports=t[r].airports;for(var s in t[r].proposals[a].terms)h[P].price[s]=t[r].proposals[a].terms[s].unified_price,h[P].min_price[s]=t[r].proposals[a].terms[s].unified_price,h[P].url[s]=t[r].proposals[a].terms[s].url}else{C=0;for(var e in h)if(h[e].sign==t[r].proposals[a].sign){var i=Object.keys(h[e].gates_info).length;h[e].gates_info[i]=t[r].gates_info;for(var s in t[r].proposals[a].terms){h[e].price[s]=t[r].proposals[a].terms[s].unified_price;for(var n in h[e].min_price)for(var o in h[e].price)h[e].min_price[n]>h[e].price[o]&&null!=h[e].price[o]&&(delete h[e].min_price[n],h[e].min_price[o]=h[e].price[o]);h[e].url[s]=t[r].proposals[a].terms[s].url}C=1;break}if(0==C){P++,h[P]={},h[P].sign=t[r].proposals[a].sign,h[P].proposals={},h[P].proposals=t[r].proposals[a],h[P].gates_info={},h[P].gates_info[0]=t[r].gates_info,h[P].price={},h[P].url={},h[P].view=0,h[P].search_id=t[r].search_id,h[P].min_price={},h[P].airports=t[r].airports;for(var s in t[r].proposals[a].terms)h[P].price[s]=t[r].proposals[a].terms[s].unified_price,h[P].min_price[s]=t[r].proposals[a].terms[s].unified_price,h[P].url[s]=t[r].proposals[a].terms[s].url}}if(parseInt(a,10)>150)break}}function e(t){switch(t){case"min_price":do{a=!1;for(var r in h){var a,s=parseInt(r,10)+1;for(var e in h[r].min_price)if("undefined"!=typeof h[s])for(var i in h[s].min_price)if(parseInt(h[r].min_price[e],10)>parseInt(h[s].min_price[i],10)){var n=h[r];h[r]=h[s],h[s]=n,a=!0}}}while(a)}}function i(t,a,s){for(var e=a;s>e;e++)if("undefined"!=typeof t[e]){var i=t[e].proposals.validating_carrier;for(var n in t[e].min_price){B=t[e].min_price[n],q=t[e].min_price[n],c=t[e].url[n];for(var o in t[e].gates_info)for(var p in t[e].gates_info[o])p==n&&(G=t[e].gates_info[o][p].label)}S=t[e].search_id;var h=0,u=0,d="";d+='<div class="container2" id="cont'+ir+'" style="display: none;margin-top: 200px;"><div class="row" style="margin-left: 200px;"><div class="item-title"> <h4> '+g+" - "+v+" </h4> </div></div>";for(var f=0;f<Object.keys(t[e].proposals.segment[0].flight).length;f++)if(or="",F[h]=t[e].proposals.segment[0].flight[f].departure,H[h]=t[e].proposals.segment[0].flight[f].arrival,J[h]=moment(t[e].proposals.segment[0].flight[f].departure_date).format("DD MMM YYYY"),K[h]=t[e].proposals.segment[0].flight[f].departure_time,L[h]=moment(t[e].proposals.segment[0].flight[f].arrival_date).format("DD MMM YYYY"),N[h]=t[e].proposals.segment[0].flight[f].arrival_time,Q[h]=t[e].proposals.segment[0].flight[f].duration,R[h]=t[e].proposals.segment[0].flight[f].delay,d+='<div class="item-body" style="width:650px;margin-left:170px;"> <table class="item-table"> <thead> <tr><th class="route">Путь</th> <th class="depart">Вылет</th> <th class="arrive">Прибытие</th> <th class="duration">Длительнсоть</th> <th class="duration">Перевозчик</th>  </tr> </thead><tbody><tr>',d+='<td class="route"><ul><li>'+t[e].proposals.segment[0].flight[f].departure+'<i class="awe-icon awe-icon-arrow-right"></i></li><li>'+t[e].proposals.segment[0].flight[f].arrival+'<i class="awe-icon awe-icon-arrow-right"></i></li></ul>',d+='<td class="depart"> <span>'+t[e].proposals.segment[0].flight[f].departure_time+'</span><span class="date" data-locale="ru">'+moment(t[e].proposals.segment[0].flight[f].departure_date).format("DD MMM YYYY"),d+='<td class="arrive"><span>'+t[e].proposals.segment[0].flight[f].arrival_time+'</span><span class="date" data-locale="ru">'+moment(t[e].proposals.segment[0].flight[f].arrival_date).format("DD MMM YYYY")+"</span></td>",d+='<td class="duration"><span>'+r(t[e].proposals.segment[0].flight[f].duration)+"</span> </td>",d+="undefined"!=typeof t[e].proposals.segment[0].flight[f].aircraft?'<td class="duration"><span>'+t[e].proposals.segment[0].flight[f].aircraft+'</span> <img src="http://pics.avs.io/al_square/65/65/'+t[e].proposals.segment[0].flight[f].operating_carrier+'.png"></td>':'<td class="duration"><span></span> <img src="http://pics.avs.io/al_square/65/65/'+t[e].proposals.segment[0].flight[f].operating_carrier+'.png"></td>',d+="</tbody></table></div>",h++,Object.keys(t[e].proposals.segment[0].flight).length>1&&h<Object.keys(t[e].proposals.segment[0].flight).length){for(var m in t[e].airports)m==t[e].proposals.segment[0].flight[f].arrival&&(or=t[e].airports[m].cases.pr,"о Киеве"==or&&(or=or.split("о "),or=or[1]));d+='<div style="background: #f4f4f4;margin-left: 190px;height:30px;float:left;width:350px;"><div class="expl-flight-stop-icon  expl-flight-wait-icon" style="margin-left:10px;margin-top:5px;"><i class="fa fa-clock-o"></i></div><div class="expl-flight-layover-airport"  style="margin-top:5px;">Пересадка в '+or+'</div><div class="expl-flight-duration"  style="margin-top:5px;">'+r(t[e].proposals.segment[0].flight[f+1].delay)+" </div></div>"}if("undefined"==typeof t[e].proposals.segment[1]&&(d+="</div>"),"undefined"!=typeof t[e].proposals.segment[1]){d+='<div class="row" style="margin-left: 200px;"><div class="item-title" style="float:left"> <h4> '+v+" - "+g+"</h4> </div></div>";for(var f=0;f<Object.keys(t[e].proposals.segment[1].flight).length;f++)if(or="",U[u]=t[e].proposals.segment[1].flight[f].departure,V[u]=t[e].proposals.segment[1].flight[f].arrival,W[u]=moment(t[e].proposals.segment[1].flight[f].departure_date).format("DD MMM YYYY"),X[u]=t[e].proposals.segment[1].flight[f].departure_time,Z[u]=moment(t[e].proposals.segment[1].flight[f].arrival_date).format("DD MMM YYYY"),tr[u]=t[e].proposals.segment[1].flight[f].arrival_time,rr[u]=t[e].proposals.segment[1].flight[f].duration,ar[u]=t[e].proposals.segment[1].flight[f].delay,d+='<div class="item-body" style="width:650px;margin-left:170px;"> <table class="item-table"> <thead> <tr><th class="route">Путь</th> <th class="depart">Вылет</th> <th class="arrive">Прибытие</th> <th class="duration">Длительнсоть</th> <th class="duration">Перевозчик</th>  </tr> </thead><tbody><tr>',d+='<td class="route"><ul><li>'+t[e].proposals.segment[1].flight[f].departure+'<i class="awe-icon awe-icon-arrow-right"></i></li><li>'+t[e].proposals.segment[1].flight[f].arrival+'<i class="awe-icon awe-icon-arrow-right"></i></li></ul>',d+='<td class="depart"> <span>'+t[e].proposals.segment[1].flight[f].departure_time+'</span><span class="date" data-locale="ru">'+moment(t[e].proposals.segment[1].flight[f].departure_date).format("DD MMM YYYY"),d+='<td class="arrive"><span>'+t[e].proposals.segment[1].flight[f].arrival_time+'</span><span class="date" data-locale="ru">'+moment(t[e].proposals.segment[1].flight[f].arrival_date).format("DD MMM YYYY")+"</span></td>",d+='<td class="duration"><span>'+r(t[e].proposals.segment[1].flight[f].duration)+"</span> </td>",d+="undefined"!=typeof t[e].proposals.segment[1].flight[f].aircraft?'<td class="duration"><span>'+t[e].proposals.segment[1].flight[f].aircraft+'</span> <img src="http://pics.avs.io/al_square/65/65/'+t[e].proposals.segment[1].flight[f].operating_carrier+'.png"></td>':'<td class="duration"><span></span> <img src="http://pics.avs.io/al_square/65/65/'+t[e].proposals.segment[1].flight[f].operating_carrier+'.png"></td>',d+="</tbody></table></div>",u++,Object.keys(t[e].proposals.segment[1].flight).length>1&&u<Object.keys(t[e].proposals.segment[1].flight).length){for(var m in t[e].airports)m==t[e].proposals.segment[1].flight[f].arrival&&(or=t[e].airports[m].cases.pr,"о Киеве"==or&&(or=or.split("о "),or=or[1]));d+='<div style="background: #f4f4f4;margin-left: 190px;height:30px;float:left;width:350px;"><div class="expl-flight-stop-icon  expl-flight-wait-icon" style="margin-left:10px;margin-top:5px;"><i class="fa fa-clock-o"></i></div><div class="expl-flight-layover-airport"  style="margin-top:5px;">Пересадка в '+or+'</div><div class="expl-flight-duration"  style="margin-top:5px;">'+r(t[e].proposals.segment[1].flight[f+1].delay)+" </div></div>"}d+="</div>"}nr=0,h=0;var y=g+" - "+v,b="",M="",_="",w="";b+="<li>"+F[0]+'<i class="awe-icon awe-icon-arrow-right"></i></li>',M+="<li>"+U[0]+'<i class="awe-icon awe-icon-arrow-right"></i></li>';for(var I=0;I<H.length;I++)b+="<li>"+H[I]+'<i class="awe-icon awe-icon-arrow-right"></i></li>';for(var x=0;x<R.length;x++)sr+=R[x];for(var x=0;x<Q.length;x++)sr+=parseInt(Q[x],10);if(sr=r(sr),_=" <span>"+K[0]+'</span><span class="date" data-locale="ru">'+J[0]+'</span></td><td class="arrive"><span>'+N[N.length-1]+'</span></td><td class="duration"><span>'+sr+"</span>",null!=l)switch(l){case"usd":B=Math.round(B/T.usd),B=accounting.formatMoney(B,"$",0," ",",","%s%v"),q=Math.round(q/T.usd),E="usd";break;case"byr":B=Math.round(B/T.byr),B=accounting.formatMoney(B,"Br",0," ",",","%v %s"),q=Math.round(q/T.byr),E="byr";break;case"rub":B=Math.round(B),B=accounting.formatMoney(B,"Руб.",0," ",",","%v %s"),q=Math.round(q),E="rub";break;case"eur":B=Math.round(B/T.eur),B=accounting.formatMoney(B,"€",0," ",",","%s%v"),q=Math.round(q/T.eur),E="eur";break;case"uah":B=Math.round(B/T.uah),B=accounting.formatMoney(B,"₴",0," ",",","%s%v"),q=Math.round(q/T.uah),E="uah"}else B=Math.round(B/T.byr),B=accounting.formatMoney(B,"Br",0," ",",","%v %s"),q=Math.round(q/T.byr),E="byr";if("undefined"!=typeof t[e].proposals.segment[1]){for(var I=0;I<V.length;I++)M+="<li>"+V[I]+'<i class="awe-icon awe-icon-arrow-right"></i></li>';for(var x=0;x<ar.length;x++)er+=ar[x];for(var x=0;x<rr.length;x++)er+=parseInt(rr[x],10);er=r(er),w=" <span>"+X[0]+'</span></td><td class="arrive"><span>'+tr[tr.length-1]+'</span><span class="date" data-locale="ru">'+W[0]+'</span></td><td class="duration"><span>'+er+"</span>",$(".filter-item-wrapper").append('<div class="flight-item"><div class="item-media"><div class="image-cover"><img src=" http://pics.avs.io/140/140/'+i+'.png" alt=""></div> </div> <div class="item-body"> <div class="item-title"> <h2> <a  type="button" class="full_info_link">'+y+'</a> </h2> </div> <table class="item-table"> <thead> <tr> <th class="route">Путь</th> <th class="depart">Вылет</th> <th class="arrive">Прибытие</th> <th class="duration">Длительнсоть</th> </tr> </thead> <tbody> <tr> <td class="route"> <ul>'+b+' </ul> </td> <td class="depart">'+_+' </td> </tr> <tr> <td class="route"> <ul>'+M+' </ul> </td> <td class="depart">'+w+' </td> </tr> </tbody> </table> </div> <div class="item-price-more"> <div class="price"> <span class="amount" price="'+q+'" cur="'+E+'">'+B+' </span> </div> <a href="/avia/buy/'+S+"/"+c+'" class="awe-btn"  target="_blank" style="padding:5px;">Купить <br> на '+G+"</a> </div>"+d+' <a id="avia_more_button" class="awe-btn avia_more_button"  con="'+ir+'">Подробнее</a> </div>')}else $(".filter-item-wrapper").append('<div class="flight-item"><div class="item-media"><div class="image-cover"><img src=" http://pics.avs.io/140/140/'+i+'.png" alt=""></div> </div> <div class="item-body"> <div class="item-title"> <h2> <a  type="button" class="full_info_link">'+y+'</a> </h2> </div> <table class="item-table"> <thead> <tr> <th class="route">Путь</th> <th class="depart">Вылет</th> <th class="arrive">Прибытие</th> <th class="duration">Длительнсоть</th> </tr> </thead> <tbody> <tr> <td class="route"> <ul>'+b+' </ul> </td> <td class="depart">'+_+' </td> </tr> <tr>  </tbody> </table> </div> <div class="item-price-more"> <div class="price"> <span class="amount"  price="'+q+'"  cur="'+E+'">'+B+'</span> </div> <a href="/avia/buy/'+S+"/"+c+'" class="awe-btn"  target="_blank">Купить <br> на '+G+"</a> </div>"+d+'  <a id="avia_more_button" class="awe-btn avia_more_button" con="'+ir+'">Подробнее</a></div');ir++,sr=0,er=0,F=[],H=[],J=[],K=[],L=[],N=[],Q=[],R=[],U=[],V=[],W=[],X=[],Z=[],tr=[],rr=[],ar=[]}$(".avia_more_button").bind("click",function(){$(this).prev().toggle("slow",function(){"block"==$(this).css("display")&&$(this).next().html("Скрыть"),"none"==$(this).css("display")&&$(this).next().html("Подробнее")})})}function n(){$(".filter-item-wrapper").html("")}function o(t){$.ajax({type:"POST",data:{_token:Y},dataType:"json",beforeSend:function(){},complete:function(){},url:t,success:function(r){a(t,r)},error:function(){$("#progressbar").css({display:"none"})}})}function p(t){$(".amount").each(function(){switch(t){case"usd":"byr"==$(this).attr("cur")?(B=Math.round(parseInt($(this).attr("price"),10)*T.byr/T.usd),B=accounting.formatMoney(B,"$",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)*T.byr/T.usd),$(this).attr("price",q),$(this).attr("cur","usd"),$(this).html(B),l="usd"):"eur"==$(this).attr("cur")?(B=Math.round(parseInt($(this).attr("price"),10)*T.eur/T.usd),B=accounting.formatMoney(B,"$",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)*T.eur/T.usd),$(this).attr("price",q),$(this).attr("cur","usd"),$(this).html(B),l="usd"):"rub"==$(this).attr("cur")?(B=Math.round(parseInt($(this).attr("price"),10)/T.usd),B=accounting.formatMoney(B,"$",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)/T.usd),$(this).attr("price",q),$(this).attr("cur","usd"),$(this).html(B),l="usd"):"uah"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.uah/T.usd),B=accounting.formatMoney(B,"$",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)*T.uah/T.usd),$(this).attr("price",q),$(this).attr("cur","usd"),$(this).html(B),l="usd");break;case"byr":"usd"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.usd/T.byr),B=accounting.formatMoney(B,"Br",0," ",",","%v %s"),q=Math.round(parseInt($(this).attr("price"),10)*T.usd/T.byr),$(this).attr("price",q),$(this).attr("cur","byr"),$(this).html(B),l="byr"),"eur"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.eur/T.byr),B=accounting.formatMoney(B,"Br",0," ",",","%v %s"),q=Math.round(parseInt($(this).attr("price"),10)*T.eur/T.byr),$(this).attr("price",q),$(this).attr("cur","byr"),$(this).html(B),l="byr"),"rub"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)/T.byr),B=accounting.formatMoney(B,"Br",0," ",",","%v %s"),q=Math.round(parseInt($(this).attr("price"),10)/T.byr),$(this).attr("price",q),$(this).attr("cur","byr"),l="byr"),"uah"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.uah/T.byr),B=accounting.formatMoney(B,"Br",0," ",",","%v %s"),q=Math.round(parseInt($(this).attr("price"),10)*T.uah/T.byr),$(this).attr("price",q),$(this).attr("cur","byr"),$(this).html(B),l="byr");break;case"rub":"usd"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.usd),B=accounting.formatMoney(B,"Руб.",0," ",",","%v %s"),q=Math.round(parseInt($(this).attr("price"),10)*T.usd),$(this).attr("price",q),$(this).attr("cur","rub"),$(this).html(B),l="rub"),"eur"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.eur),B=accounting.formatMoney(B,"Руб.",0," ",",","%v %s"),q=Math.round(parseInt($(this).attr("price"),10)*T.eur),$(this).attr("price",q),$(this).attr("cur","rub"),$(this).html(B),l="rub"),"byr"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.byr),B=accounting.formatMoney(B,"Руб.",0," ",",","%v %s"),q=Math.round(parseInt($(this).attr("price"),10)*T.byr),$(this).attr("price",q),$(this).attr("cur","rub"),$(this).html(B),l="rub"),"uah"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.uah),B=accounting.formatMoney(B,"Руб.",0," ",",","%v %s"),q=Math.round(parseInt($(this).attr("price"),10)*T.uah),$(this).attr("price",q),$(this).attr("cur","rub"),$(this).html(B),l="rub");break;case"eur":"usd"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.usd/T.eur),B=accounting.formatMoney(B,"€",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)*T.usd/T.eur),$(this).attr("price",q),$(this).attr("cur","eur"),$(this).html(B),l="eur"),"rub"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)/T.eur),B=accounting.formatMoney(B,"€",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)/T.eur),$(this).attr("price",q),$(this).attr("cur","eur"),$(this).html(B),l="eur"),"byr"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.byr/T.eur),B=accounting.formatMoney(B,"€",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)*T.byr/T.eur),$(this).attr("price",q),$(this).attr("cur","eur"),$(this).html(B),l="eur"),"uah"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.uah/T.eur),B=accounting.formatMoney(B,"€",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)*T.uah/T.eur),$(this).attr("price",q),$(this).attr("cur","eur"),$(this).html(B),l="eur");break;case"uah":"usd"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.usd/T.uah),B=accounting.formatMoney(B,"₴",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)*T.byr/T.uah),$(this).attr("price",q),$(this).attr("cur","uah"),$(this).html(B),l="uah"),"eur"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.eur/T.uah),B=accounting.formatMoney(B,"₴",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)*T.eur/T.uah),$(this).attr("price",q),$(this).attr("cur","uah"),$(this).html(B),l="uah"),"rub"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)/T.uah),B=accounting.formatMoney(B,"₴",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)/T.uah),$(this).attr("price",q),$(this).attr("cur","uah"),$(this).html(B),l="uah"),"byr"==$(this).attr("cur")&&(B=Math.round(parseInt($(this).attr("price"),10)*T.byr/T.uah),B=accounting.formatMoney(B,"₴",0," ",",","%s%v"),q=Math.round(parseInt($(this).attr("price"),10)*T.byr/T.uah),$(this).attr("price",q),$(this).attr("cur","uah"),$(this).html(B),l="uah")}})}var l,c=location.href,h={},u=0,d=c.split("/avia/"),c=d[0].split("//"),c=c[1],f=d[1].split("/"),m=t(f,1),g="",v="";if(m.length<29)var y=m[0]+m[1]+m[2],b=m[13]+m[14]+m[15],M=m[3]+m[4]+m[5]+m[6]+m[7]+m[8]+m[9]+m[10]+m[11]+m[12],_=m[16],w=m[17],I=m[18],x=m[19],k="http://"+c+"/avia/search",c="http://"+c+"/avia/"+y+"-"+b+"/"+M+"/"+_+"-"+w+"-"+I+"/"+x,Y=$('input[name="_token"]').attr("value");else var y=m[0]+m[1]+m[2],b=m[13]+m[14]+m[15],M=m[3]+m[4]+m[5]+m[6]+m[7]+m[8]+m[9]+m[10]+m[11]+m[12],A=m[16]+m[17]+m[18]+m[19]+m[20]+m[21]+m[22]+m[23]+m[24]+m[25],_=m[26],w=m[27],I=m[28],x=m[29],k="http://"+c+"/avia/search",c="http://"+c+"/avia/"+y+"-"+b+"/"+M+"/"+A+"/"+_+"-"+w+"-"+I+"/"+x,Y=$('input[name="_token"]').attr("value");$.ajax({type:"GET",url:"http://places.aviasales.ru/",dataType:"jsonp",data:{locale:"ru",term:y},success:function(t){return g=t[0].name,g=g.split(","),g=g[0]}}),$.ajax({type:"GET",url:"http://places.aviasales.ru/",dataType:"jsonp",data:{locale:"ru",term:b},success:function(t){return v=t[0].name,v=v.split(","),v=v[0]}});var D=$("#progressbar"),j=$(".progress-label");D.progressbar({value:!1,change:function(){j.text(D.progressbar("value")+"%")},complete:function(){}});var O=c+"/uuid",T={};$.ajax({type:"POST",url:O,data:{_token:Y},success:function(t){T=t.currency_rates,search_url=k+"/"+t.search_id,o(search_url)}});var B,q,S,E,G,P=0,z=0,P=0,C=0,F=new Array,H=new Array,J=new Array,K=new Array,L=new Array,N=new Array,Q=new Array,R=new Array,U=new Array,V=new Array,W=new Array,X=new Array,Z=new Array,tr=new Array,rr=new Array,ar=new Array,sr=0,er=0,ir=0,nr=0;moment.locale("ru",{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]});var or="",pr=0,lr=10;$(window).scroll(function(){$(window).scrollTop()+$(window).height()>=$(document).height()-600&&(0!=$(".filter-item-wrapper").html().length&&1==u?($(".not_end").empty(),pr+=10,lr+=10,i(h,pr,lr),$(".avia_more_button").unbind("click"),$(".avia_more_button").bind("click",function(){$(this).prev().toggle("slow",function(){"block"==$(this).css("display")&&$(this).next().html("Скрыть"),"none"==$(this).css("display")&&$(this).next().html("Подробнее")})})):0!=$(".filter-item-wrapper").html().length&&0==u&&($(".not_end").empty(),$(".filter-item-wrapper").append('<div class="container not_end" style="margin:0 auto;text-align: center;"><h4 style="color:#666">Дождитесь окончания поиска</h4></div>')))}),$("#currency").change(function(){p($("#currency").val())})});